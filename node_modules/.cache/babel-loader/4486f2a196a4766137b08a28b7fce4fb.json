{"ast":null,"code":"var _jsxFileName = \"/home/pgf/Documents/CV-Comstructor-master/src/components/Selectimage.js\";\nimport React, { Component } from \"react\";\nimport \"./main.css\";\nimport firebase from \"./database\";\nimport FileUploader from \"react-firebase-file-uploader\";\nexport default class Profileimg extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loadingMessege: \"\",\n      avatarURL: \"\"\n    };\n\n    this.handleUploadError = error => {\n      this.setState({\n        isUploading: false\n      });\n      console.log(error);\n    };\n\n    this.handleUploadSuccess = filename => {\n      firebase.storage().ref(\"images\").child(filename).getDownloadURL().then(url => {\n        this.setState({\n          avatarURL: url\n        });\n      });\n    };\n\n    this.MoveToFB = () => {\n      var key = firebase.database().ref(\"CV/\" + firebase.auth()).push({\n        profileP: this.state.avatarURL\n      }).key;\n      var finalLink = \"/\" + this.props.match.params.template + \"/\" + firebase.auth().currentUser.uid + \"/\" + key;\n      console.log(this.props.match.params.template);\n      this.setState({\n        loadingMessege: \"Loading your CV...\"\n      });\n      setTimeout(() => {\n        window.location.href = finalLink;\n      }, 2000);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, \"Step 2: select your prof pic\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, \"Choose your profile Photo\"), /*#__PURE__*/React.createElement(FileUploader, {\n      className: \"uploader\",\n      accept: \"image/*\",\n      name: \"avatar\",\n      placeholder: \"select image\",\n      randomizeFilename: true,\n      storageRef: firebase.storage().ref(\"images\"),\n      onUploadError: this.handleUploadError,\n      onUploadSuccess: this.handleUploadSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button_a\",\n      onClick: this.MoveToFB,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, \"GET YOUR CV\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, this.state.loadingMessege));\n  }\n\n}","map":{"version":3,"sources":["/home/pgf/Documents/CV-Comstructor-master/src/components/Selectimage.js"],"names":["React","Component","firebase","FileUploader","Profileimg","state","loadingMessege","avatarURL","handleUploadError","error","setState","isUploading","console","log","handleUploadSuccess","filename","storage","ref","child","getDownloadURL","then","url","MoveToFB","key","database","auth","push","profileP","finalLink","props","match","params","template","currentUser","uid","setTimeout","window","location","href","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AAEA,eAAe,MAAMC,UAAN,SAAyBH,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAC9CI,KAD8C,GACtC;AACJC,MAAAA,cAAc,EAAE,EADZ;AAEJC,MAAAA,SAAS,EAAE;AAFP,KADsC;;AAAA,SAM9CC,iBAN8C,GAM1BC,KAAK,IAAI;AACzB,WAAKC,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAE;AAAf,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACH,KAT6C;;AAAA,SAU9CK,mBAV8C,GAUxBC,QAAQ,IAAI;AAC9Bb,MAAAA,QAAQ,CAACc,OAAT,GACKC,GADL,CACS,QADT,EAEKC,KAFL,CAEWH,QAFX,EAGKI,cAHL,GAIKC,IAJL,CAIUC,GAAG,IAAI;AACT,aAAKX,QAAL,CAAc;AAAEH,UAAAA,SAAS,EAAEc;AAAb,SAAd;AACH,OANL;AAOH,KAlB6C;;AAAA,SAoB9CC,QApB8C,GAoBnC,MAAM;AACb,UAAIC,GAAG,GAAGrB,QAAQ,CAACsB,QAAT,GACLP,GADK,CACD,QAAQf,QAAQ,CAACuB,IAAT,EADP,EAELC,IAFK,CAEA;AACFC,QAAAA,QAAQ,EAAE,KAAKtB,KAAL,CAAWE;AADnB,OAFA,EAIHgB,GAJP;AAKA,UAAIK,SAAS,GAAG,MAAM,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,QAA9B,GAAyC,GAAzC,GAA+C9B,QAAQ,CAACuB,IAAT,GAAgBQ,WAAhB,CAA4BC,GAA3E,GAAiF,GAAjF,GAAuFX,GAAvG;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKgB,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,QAApC;AACA,WAAKtB,QAAL,CAAc;AAAEJ,QAAAA,cAAc,EAAE;AAAlB,OAAd;AACA6B,MAAAA,UAAU,CAAC,MAAM;AACbC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBV,SAAvB;AACH,OAFS,EAEP,IAFO,CAAV;AAGH,KAhC6C;AAAA;;AAiC9CW,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAFJ,eAGI,oBAAC,YAAD;AACI,MAAA,SAAS,EAAC,UADd;AAEI,MAAA,MAAM,EAAC,SAFX;AAGI,MAAA,IAAI,EAAC,QAHT;AAII,MAAA,WAAW,EAAC,cAJhB;AAKI,MAAA,iBAAiB,MALrB;AAMI,MAAA,UAAU,EAAErC,QAAQ,CAACc,OAAT,GAAmBC,GAAnB,CAAuB,QAAvB,CANhB;AAOI,MAAA,aAAa,EAAE,KAAKT,iBAPxB;AAQI,MAAA,eAAe,EAAE,KAAKM,mBAR1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,eAgBI;AAAQ,MAAA,SAAS,EAAC,UAAlB;AAA6B,MAAA,OAAO,EAAE,KAAKQ,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhBJ,eAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKjB,KAAL,CAAWC,cAAhB,CAnBJ,CADJ;AAuBH;;AAzD6C","sourcesContent":["import React, { Component } from \"react\";\nimport \"./main.css\";\nimport firebase from \"./database\";\nimport FileUploader from \"react-firebase-file-uploader\";\n\nexport default class Profileimg extends Component {\n    state = {\n        loadingMessege: \"\",\n        avatarURL: \"\",\n    };\n\n    handleUploadError = error => {\n        this.setState({ isUploading: false });\n        console.log(error);\n    };\n    handleUploadSuccess = filename => {\n        firebase.storage()\n            .ref(\"images\")\n            .child(filename)\n            .getDownloadURL()\n            .then(url => {\n                this.setState({ avatarURL: url });\n            });\n    };\n\n    MoveToFB = () => {\n        var key = firebase.database()\n            .ref(\"CV/\" + firebase.auth())\n            .push({\n                profileP: this.state.avatarURL\n            }).key\n        var finalLink = \"/\" + this.props.match.params.template + \"/\" + firebase.auth().currentUser.uid + \"/\" + key;\n        console.log(this.props.match.params.template)\n        this.setState({ loadingMessege: \"Loading your CV...\" });\n        setTimeout(() => {\n            window.location.href = finalLink;\n        }, 2000);\n    };\n    render() {\n        return (\n            <div className=\"App-header\">\n                <p>Step 2: select your prof pic</p>\n                <h5>Choose your profile Photo</h5>\n                <FileUploader\n                    className=\"uploader\"\n                    accept=\"image/*\"\n                    name=\"avatar\"\n                    placeholder=\"select image\"\n                    randomizeFilename\n                    storageRef={firebase.storage().ref(\"images\")}\n                    onUploadError={this.handleUploadError}\n                    onUploadSuccess={this.handleUploadSuccess}\n                />\n\n\n\n                <button className=\"button_a\" onClick={this.MoveToFB}>\n                    GET YOUR CV\n        </button>\n                <h4>{this.state.loadingMessege}</h4>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}